<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Strmtoy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Strmtoy">
<meta property="og:url" content="http://stormtoy.cn/index.html">
<meta property="og:site_name" content="Strmtoy">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Strmtoy">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Strmtoy" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Strmtoy</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://stormtoy.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-C-学习笔记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/05/C-学习笔记/" class="article-date">
  <time datetime="2016-01-05T02:07:15.000Z" itemprop="datePublished">2016-01-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/05/C-学习笔记/">C#学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近开始学习unity进行游戏开发了，unity引擎支持C#与javascript两种编程语言。之前搞过Web开发，对Java和Ruby比较熟悉，这次游戏开发的编程语言我选择C#，所以有必要对C#的语言知识点进行梳理、复习和总结，为开发游戏做好基础准备。我自己参考了一本复习资料 «Learning hard C#学习笔记»，我自己读了几章，感觉写的相当不错。我将列出主要的知识点进行梳理，并在日后补上代码进行完善。</p>
<h2 id="什么是C"><a href="#什么是C" class="headerlink" title="什么是C"></a>什么是C</h2><p>C#是由微软公司开发的一种面向对象且运行与.NET Framework之上的高级程序设计语言。</p>
<h2 id="C-能编写哪些应用程序"><a href="#C-能编写哪些应用程序" class="headerlink" title="C#能编写哪些应用程序"></a>C#能编写哪些应用程序</h2><ul>
<li>Windows桌面应用程序</li>
<li>Web应用程序</li>
<li>Web服务</li>
</ul>
<h2 id="什么是-NET-Framework"><a href="#什么是-NET-Framework" class="headerlink" title="什么是.NET Framework"></a>什么是.NET Framework</h2><p>C#是一门编程语言，它用于实现与计算机的对话，但C#编写的程序是需要编译和运行的，.NET Framework就是应用程序运行时执行环境，为应用程序的执行提供以下几种服务。</p>
<ul>
<li>全面的类库</li>
<li>内存管理</li>
<li>通用类型系统</li>
<li>开发结构和技术</li>
<li>语言互操作性</li>
</ul>
<h2 id="NET-Framework的组成"><a href="#NET-Framework的组成" class="headerlink" title=".NET Framework的组成"></a>.NET Framework的组成</h2><p>.NET Framework包括公共语言运行时（Common Language Runtime ,CLR）和.NET Framework 类库(Framework Class Library ,FCL)</p>
<h2 id="C-与-NET-Framework的关系"><a href="#C-与-NET-Framework的关系" class="headerlink" title="C#与.NET Framework的关系"></a>C#与.NET Framework的关系</h2><p>C#是面向.NET Framework的语言，除了C#之外，VB.NET 和 F#也都是面向.NET Framework的语言。.NET Framework为这些语言提供了执行环境，这些语言则可以调用.NET Framework所提供的类库来开发各种应用程序。</p>
<h2 id="C-代码的执行过程"><a href="#C-代码的执行过程" class="headerlink" title="C#代码的执行过程"></a>C#代码的执行过程</h2><ul>
<li>C#代码编译为中间语言代码的阶段CIL</li>
<li>中间语言代码编译为本机代码的阶段</li>
<li>执行本机代码</li>
</ul>
<h2 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h2><h3 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h3><ul>
<li>整形</li>
<li>浮点型</li>
<li>十进制型</li>
<li>布尔类型</li>
</ul>
<h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><h3 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h3><!--lang:c#-->
<p>enum Gender<br>{<br>    Female,<br>    Male<br>}</p>
<h3 id="结构体类型"><a href="#结构体类型" class="headerlink" title="结构体类型"></a>结构体类型</h3><p>C#中的结构体是一种值类型，通常适用于表示诸如Point、Rectangle和Color等的轻量级对象。</p>
<h3 id="数组类型"><a href="#数组类型" class="headerlink" title="数组类型"></a>数组类型</h3><p>数组是一种引用类型，它代表了相同类型元素的集合。</p>
<h2 id="变量和常量"><a href="#变量和常量" class="headerlink" title="变量和常量"></a>变量和常量</h2><h3 id="变量的使用"><a href="#变量的使用" class="headerlink" title="变量的使用"></a>变量的使用</h3><h3 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h3><h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><p>const 数据类型 常量名 = 与数据类型相对应的值;</p>
<ul>
<li>因为后续无法更改，常量必须在声明时就进行初始化</li>
<li>常量无法接受变量的赋值</li>
<li>常量默认是静态的，不允许显示使用static关键字声明</li>
</ul>
<h2 id="C-中的语句"><a href="#C-中的语句" class="headerlink" title="C#中的语句"></a>C#中的语句</h2><h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><ul>
<li>if语句</li>
<li>switch语句</li>
<li>循环语句</li>
<li>跳转语句</li>
</ul>
<h2 id="C-中的类"><a href="#C-中的类" class="headerlink" title="C#中的类"></a>C#中的类</h2><h3 id="什么是类"><a href="#什么是类" class="headerlink" title="什么是类"></a>什么是类</h3><p>类代表一组具有公共属性和行为的对象。</p>
<h3 id="类的成员"><a href="#类的成员" class="headerlink" title="类的成员"></a>类的成员</h3><ul>
<li>字段</li>
<li>属性</li>
<li>方法</li>
</ul>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><ul>
<li>实例构造函数</li>
<li>静态构造函数</li>
</ul>
<h3 id="析构函数"><a href="#析构函数" class="headerlink" title="析构函数"></a>析构函数</h3><h3 id="索引器"><a href="#索引器" class="headerlink" title="索引器"></a>索引器</h3><h3 id="类实例化"><a href="#类实例化" class="headerlink" title="类实例化"></a>类实例化</h3><h3 id="类与结构体的区别"><a href="#类与结构体的区别" class="headerlink" title="类与结构体的区别"></a>类与结构体的区别</h3><h2 id="C-中面向对象编程"><a href="#C-中面向对象编程" class="headerlink" title="C#中面向对象编程"></a>C#中面向对象编程</h2><h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><p>封装指的是把类内部的数据隐藏起来，不让对象实例直接对其操作。</p>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>在C#中，一个类可以继承另一个已有的类(密封类除外)，被继承的类称为基类（或父类），继承的类称为派生类（或子类），子类将获得基类除构造函数和西沟函数以外的所有成员。C#可以继承一个基类，并实现多个接口。</p>
<h3 id="密封类"><a href="#密封类" class="headerlink" title="密封类"></a>密封类</h3><h3 id="子类的初始化顺序"><a href="#子类的初始化顺序" class="headerlink" title="子类的初始化顺序"></a>子类的初始化顺序</h3><p>使用了继承之后，档我们初始化一个子类时，除了会调用子类的构造函数外，同时也会调用基类的构造函数。</p>
<h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><p>多态既相同类型的对象调用相同的方法却表现出不同行为的现象。</p>
<h3 id="使用virtual和override关键字实现方法重写"><a href="#使用virtual和override关键字实现方法重写" class="headerlink" title="使用virtual和override关键字实现方法重写"></a>使用virtual和override关键字实现方法重写</h3><h3 id="所有类的父类：System-object"><a href="#所有类的父类：System-object" class="headerlink" title="所有类的父类：System.object"></a>所有类的父类：System.object</h3><h2 id="C-接口"><a href="#C-接口" class="headerlink" title="C#接口"></a>C#接口</h2><p>接口可以理解为对一组方法声明进行的统一命名，但这些方法没有提供任何实现。把一组方法声明在一个接口中，然后继承于该接口的类都需要实现这些方法。</p>
<h3 id="继承接口（实现接口）"><a href="#继承接口（实现接口）" class="headerlink" title="继承接口（实现接口）"></a>继承接口（实现接口）</h3><h3 id="调用接口中的方法"><a href="#调用接口中的方法" class="headerlink" title="调用接口中的方法"></a>调用接口中的方法</h3><h3 id="接口与抽象类"><a href="#接口与抽象类" class="headerlink" title="接口与抽象类"></a>接口与抽象类</h3><h2 id="C-委托"><a href="#C-委托" class="headerlink" title="C#委托"></a>C#委托</h2><p>C#中的委托可以理解为函数的一个包装，他使得C#中的函数可以作为参数来被传递。</p>
<h3 id="委托的使用"><a href="#委托的使用" class="headerlink" title="委托的使用"></a>委托的使用</h3><h3 id="委托链"><a href="#委托链" class="headerlink" title="委托链"></a>委托链</h3><h2 id="C-事件"><a href="#C-事件" class="headerlink" title="C#事件"></a>C#事件</h2><h2 id="C-中的类型—值类型和引用类型"><a href="#C-中的类型—值类型和引用类型" class="headerlink" title="C#中的类型—值类型和引用类型"></a>C#中的类型—值类型和引用类型</h2><h2 id="C-泛型"><a href="#C-泛型" class="headerlink" title="C#泛型"></a>C#泛型</h2><h3 id="泛型是什么"><a href="#泛型是什么" class="headerlink" title="泛型是什么"></a>泛型是什么</h3><p>泛型代表的就是“通用类型”，它可以代替任意的数据类型，使类型参数化，从而达到只实现一个方法就可以操作多种数据类型的目的。泛型将方法实现行为与方法操作的数据类型分离，实现了代码重用。</p>
<h2 id="可空类型、匿名方法和迭代器"><a href="#可空类型、匿名方法和迭代器" class="headerlink" title="可空类型、匿名方法和迭代器"></a>可空类型、匿名方法和迭代器</h2><p>先列出这么多知识点，以后完善。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2016/01/05/C-学习笔记/" data-id="cimadljro0000lav1sx45187l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c/">c#</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-从现在开始，做个自由的人" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/01/从现在开始，做个自由的人/" class="article-date">
  <time datetime="2016-01-01T00:00:00.000Z" itemprop="datePublished">2016-01-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/01/从现在开始，做个自由的人/">从现在开始，做个自由的人</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>2015年12月31号，我正式是从原公司离职，踏上了和基友一起创业的道路。在公司这三年，其实学到了很多东西：技术上的、管理上的、人情世故等等。回想起来，我还是挺幸运的。老板和同事人都很好，我们在一起顺利完成了几个项目，部门气氛也相当融洽。不过随着现在部门开发流程慢慢走向正轨、开发技术和效率得到提升。作为一个小团队负责人的我却越来越没有当初刚进公司的那种激情和拼劲，我曾在半年前努力思考自己激情去哪了？后面和基友们交流了很多次，没想到大家貌似都有同感。只是有的人依旧不会做出改变，有些人会立刻就有行动。我所处的城市属于三线城市，大部分IT公司都是一个项目接一个项目的来做，这是企业级Web开发的厌倦嘛？厌倦了一个接着一个的项目定制、一个接一个的上帝客户？有一天我发现，其实我们可以按照的意思去做事，而不用去理会他人怎么看。这样的话，也许我会更有主动，更加激情，更加专注。那一刻，我突然想起了游戏，是的，你没看错，是游戏。我从小就喜欢玩游戏，从红白机、16位的世嘉、GBA、街机、PS什么的直到PC…玩过的游戏很多，为了玩游戏曾经被老师、家长PK过很多次。。</p>
<p>甚至5年前学习编程，当初学习编程的主要目的就是想做个游戏。想想这几年工作，都忘记了初心。这几年前端、后端、移动端我都有涉及，唯独游戏开发从来没有触及过，这次准备从传统开发转行到游戏开发，虽然跨度蛮大的，但是最近我发现我已经乐在其中。我喜欢去挑战之前没做过的事，这是勇敢还是鲁莽都不重要，重要的是我现在的工作和生活是我自己能掌控。</p>
<p>2016年已到来，以后自己的时间会更加自由，我会开始坚持学习；坚持写博客；坚持锻炼身体。拒绝浮躁，沉下心来，争取在前半年做出我们的游戏原型。</p>
<p>2016年，我们一起努力吧！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2016/01/01/从现在开始，做个自由的人/" data-id="cimadljs9000blav1b07i3l97" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/感悟/">感悟</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-png-support-for-php-on-os-x-yosemite" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/12/png-support-for-php-on-os-x-yosemite/" class="article-date">
  <time datetime="2015-12-12T10:07:15.000Z" itemprop="datePublished">2015-12-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/12/png-support-for-php-on-os-x-yosemite/">png support for php on os x yosemite</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>参考：<br><a href="http://brianflove.com/2014/12/10/png-support-for-php-on-os-x-yosemite/" target="_blank" rel="external">http://brianflove.com/2014/12/10/png-support-for-php-on-os-x-yosemite/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/12/12/png-support-for-php-on-os-x-yosemite/" data-id="cimadljsh000elav1eavo1t7j" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ios8、cancan、显示隐藏静态uitableviewcell" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/26/ios8、cancan、显示隐藏静态uitableviewcell/" class="article-date">
  <time datetime="2015-06-26T09:17:14.000Z" itemprop="datePublished">2015-06-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/26/ios8、cancan、显示隐藏静态uitableviewcell/">ios8、cancan、显示隐藏静态uitableviewcell</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>需求是需要动态根据用户的权限显示隐藏uitableviewcell</p>
<p>第一步先获得用户权限JSON数据</p>
<pre>#AdminAbility.rb
def as_json
    abilities = []
    map = {}
    rules.each do |rule|
      abilities &lt;&lt; { can: rule.base_behavior, actions: rule.actions.as_json, subjects: rule.subjects.map(&amp;:to_s) } #conditions: rule.conditions.as_json
    end
    abilities.each do |ability|
      ability["actions".to_sym].each do |action|
        ability["subjects".to_sym].each do |subject|
          map[action.to_s+"_"+subject.to_s] = ability["can".to_sym]
        end
      end
    end
    map
  end
</pre>

<p>在cancan定义的model中加入as_json方法，用来获取当前用户的权限数据</p>
<p>定义MenuTableViewCell，定义属性ability</p>
<pre>//MenuTableViewCell.swift
import UIKit

class MenuTableViewCell: UITableViewCell {

    var ability:String!

    override func awakeFromNib() {
        super.awakeFromNib()
        // Initialization code
    }

    override func setSelected(selected: Bool, animated: Bool) {
        super.setSelected(selected, animated: animated)

        // Configure the view for the selected state
    }

}
</pre>

<p>然后选中这个static cell，关联class 、设置User Defined Runtime Attributes</p>
<p><a href="http://stormtoy.cn/wp-content/uploads/2015/06/Snip20150626_10.png"><img src="/assets/Snip20150626_10-300x72.png" alt="Snip20150626_10"></a></p>
<p>下面一步覆盖willDisplayCell方法，即可实现根据权限数据显示或隐藏static cell</p>
<pre>
    override func  tableView(tableView: UITableView, willDisplayCell cell: UITableViewCell, forRowAtIndexPath indexPath: NSIndexPath) {
        var mc:MenuTableViewCell? = cell as? MenuTableViewCell
        if mc != nil && self.abilitys != nil {
            let abilityStr:String = mc!.valueForKeyPath("ability")! as! String
            println(self.abilitys[abilityStr])
            if self.abilitys[abilityStr] == nil {
                cell.hidden = true
            }else{
                cell.hidden = false
            }
        }
    }
</pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/06/26/ios8、cancan、显示隐藏静态uitableviewcell/" data-id="cimadljru0001lav13sc5npw8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Postgres-on-OSX-with-homebrew-not-running-after-OSX-crash" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/24/Postgres-on-OSX-with-homebrew-not-running-after-OSX-crash/" class="article-date">
  <time datetime="2015-06-24T01:13:36.000Z" itemprop="datePublished">2015-06-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/24/Postgres-on-OSX-with-homebrew-not-running-after-OSX-crash/">Postgres on OSX with homebrew not running after OSX crash</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>转自:<a href="https://coderwall.com/p/zf-fww/postgres-on-osx-with-homebrew-not-running-after-osx-crash" target="_blank" rel="external">https://coderwall.com/p/zf-fww/postgres-on-osx-with-homebrew-not-running-after-osx-crash</a></p>
<p>1) Check the log</p>
<p>$ tail -f /usr/local/var/postgres/server.log</p>
<p>FATAL:  lock file “postmaster.pid” already exists</p>
<p>HINT:  Is another postmaster (PID 326) running in data directory “/usr/local/var/postgres”?</p>
<p>FATAL:  lock file “postmaster.pid” already exists</p>
<p>HINT:  Is another postmaster (PID 326) running in data directory “/usr/local/var/postgres”?</p>
<p>2) Delete the PID file.</p>
<p>$ rm /usr/local/var/postgres/postmaster.pid</p>
<p>3) Run pg_ctl manually</p>
<p>$ pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start</p>
<p>4) Make sure it’s running</p>
<p>$ ps x | grep postgres</p>
<p>This should appear from the output above</p>
<p>8352   ??  S      0:00.02 /usr/local/opt/postgresql/bin/postgres -D /usr/local/var/postgres -r /usr/local/var/postgres/server.log</p>
<p>8354   ??  Ss     0:00.00 postgres: checkpointer process</p>
<p>8355   ??  Ss     0:00.03 postgres: writer process</p>
<p>8356   ??  Ss     0:00.01 postgres: wal writer process</p>
<p>8357   ??  Ss     0:00.00 postgres: autovacuum launcher process</p>
<p>8358   ??  Ss     0:00.00 postgres: stats collector process</p>
<p>Also, this also happens to other processes like mongodb or anything that relies on PID files.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/06/24/Postgres-on-OSX-with-homebrew-not-running-after-OSX-crash/" data-id="cimadljrz0003lav1qtcz9aok" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/osx/">osx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/postgresql/">postgresql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ios8、swift、rails4实现简单的登录功能" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/09/ios8、swift、rails4实现简单的登录功能/" class="article-date">
  <time datetime="2015-06-09T04:06:35.000Z" itemprop="datePublished">2015-06-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/09/ios8、swift、rails4实现简单的登录功能/">ios8、swift、rails4实现简单的登录功能</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>首先，使用xcode6.3先建立一个ios project，使用storyboard画出界面原型。实现的界面很简单：</p>
<p><a href="http://stormtoy.cn/wp-content/uploads/2015/06/Snip20150609_1.png"><img src="/assets/Snip20150609_1-207x300.png" alt="Snip20150609_1"></a></p>
<p>如上图所示，运行app一进来进入功能菜单controller，在功能菜单中检查用户是否登陆，如未登陆，显示模式窗口 loginviewcontroller。</p>
<pre>
# HomeViewController
override func viewDidAppear(animated: Bool) {
super.viewDidAppear(true)

let defaults = NSUserDefaults.standardUserDefaults()

if defaults.objectForKey("userLoggedIn") == nil {
if let loginController =     self.storyboard?.instantiateViewControllerWithIdentifier("LoginViewController") as? LoginViewController {
self.navigationController?.presentViewController(loginController, animated: true, completion: nil)
}
}
}
</pre>

<p>验证未登陆的功能实现完了，那么登陆功能呢？别急，我们先实现rails服务端程序，然后再做登陆功能。</p>
<p>先在rails gemfile中加入</p>
<pre># 开发移动设备API接口
gem 'rocket_pants', '~&gt; 1.9.2'
</pre>

<p>然后bundle install 安装gem,如果网络错误，可以设置使用国内镜像进行安装，只需要把下面这句代码加入到gemfile顶部，然后运行bundle install即可</p>
<pre>source 'http://ruby.taobao.org/'
</pre>

<p>然后我们来基于rocket_pants 来构建api 供移动客户端调用</p>
<p>建立好你的rails项目，我这里使用的是rails4,在如下目录建立base_controller.rb，这个Controler类似ApplicationController，我们以后开发的API Controller都要继承它，主意目录，这样做是为了更好的将版本区分开来</p>
<pre># app/controllers/api/v1/base_controller.rb

class Api::V1::BaseController &lt; RocketPants::Base
  version 1
end
</pre>

<p>接下来创建sessioncontroller，来实现登陆功能：</p>
<p>[rails]</p>
<p>class Api::V1::SessionsController &amp;lt; Api::V1::BaseController</p>
<p>  skip_before_filter :require_authentication!</p>
<p>  def create</p>
<pre><code>admin = Admin.find_for_authentication(username: admin_params[:username])

if admin &amp;amp;amp;&amp;amp;amp; admin.valid_password?(admin_params[:password])

  admin.generate_authentication_token

  expose({

             admin_id: admin.id,

             token: admin.authentication_token

         })

else

  error! :unauthenticated

end
</code></pre><p>  end</p>
<p>  private</p>
<p>  def admin_params</p>
<pre><code>params.require(:admin).permit(:username, :password)
</code></pre><p>  end</p>
<p>end</p>
<p>[/rails]</p>
<p>代码很好理解，获取到用户名，密码，然后进行验证，验证成功后 生成一个token，最后使用expose方法将admin_id与token返回给客户端调用方，我们的IOS客户端在将token与admin_id存入加密的keychain中，以便以后执行请求时使用。</p>
<p>注意token和admin_id不要存在NSUserDefaults中。</p>
<p>admin.generate_authentication_token是给用户生成token</p>
<pre>  #app/models/admin.rb 你的也许叫user.rb，记得自己写migration，增加authentication_token这一列

  def generate_authentication_token
    loop do
      self.authentication_token = SecureRandom.hex
      break unless self.class.exists?(authentication_token: authentication_token)
    end

    save!

    authentication_token
  end
</pre>

<p>上面这个SessionsController中，还有一个地方要解释，skip_before_filter :require_authentication!这一句的意思是执行SessionsController create方法时，不需要先进行认证。这个require_authentication!方法，是继承自</p>
<p>BaseController,下面我们添加基本的认证功能给BaseController。</p>
<pre>class Api::V1::BaseController &lt; RocketPants::Base
  version 1

  before_filter :authenticate_admin_from_token
  before_filter :require_authentication!

  def current_admin
    @current_admin
  end

  def current_ability
    @current_ability ||= AdminAbility.new(current_admin)
  end

  def require_authentication!
    error! :unauthenticated if current_admin.nil?
  end

  def authenticate_admin_from_token
    admin = authenticate_with_http_token do |token, options|
      admin_id = options[:admin_id]
      admin = admin_id &amp;&amp; Admin.find_by_id(admin_id)

      if admin &amp;&amp; Devise.secure_compare(admin.authentication_token, token)
        admin
      else
        nil
      end
    end
    @current_admin = admin
  end
end
</pre>

<p>这是完善后的BaseController，先根据token和admin_id进行认证，如果认证成功，将admin赋值给@current_admin，</p>
<p>这里的 current_ability方法是为了今后查询进行权限控制而建立的，使用cancancan这个gem的同学应该对这个比较熟悉。在我的rails项目中，用户的mode是Admin，你的也许是User.</p>
<p>好了，rails api 登陆功能实现完成，我们可以测试一下:</p>
<p>测试之前，先配置一下route</p>
<p>打开routes.rb，添加如下路由配置</p>
<pre>  namespace :api do
    api version: 1, module: 'v1' do
      resources :sessions, only: [:create]
    end
  end
</pre>

<p>添加完之后，我们输入 rake routes 查看路由，可以看到有这么一条</p>
<pre> api_sessions POST   /api/:version/sessions(.:format)                         api/v1/sessions#create {:version=&gt;/(1)/, :format=&gt;"json"}
</pre>

<p>好了，启动rails应用，我们打开命令行，使用curl工具测试登陆:</p>
<pre>lt-pc:~ liutao$ curl -i -X POST -d "admin[username]=xxx&amp;admin[password]=xxxxxxx" 'http://0.0.0.0:3000/api/1/sessions'

HTTP/1.1 200 OK
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
Content-Length: 71
Content-Type: application/json; charset=utf-8
ETag: "4afb5a4ff3fcd5901f889b429055b5d1"
Cache-Control: max-age=0, private, must-revalidate
X-Request-Id: e0bb263a-ddf6-4751-8fb2-c3485988cd5c
X-Runtime: 0.161095
Connection: keep-alive
Server: thin 1.6.2 codename Doc Brown

{"response":{"admin_id":26,"token":"c699f679e4690b3718594064e2ce0c85"}}lt-pc:~ liutao$
</pre>

<p>成功了，使用curl登陆成功，并返回了admin_id与token</p>
<p>接下来，我们回到Xcode，来实现客户端登陆功能</p>
<p>先添加好相应的outlet，以便可以获取界面用户名和密码</p>
<p>然后建立相应的siginTapped action，以便能捕获到登陆事件：</p>
<pre>    //登录
    @IBAction func signinTapped(sender: UIButton) {
        var username:NSString = textFieldUserName.text
        var password:NSString = textFieldPassword.text
        if (username.isEqualToString("") || password.isEqualToString("")){
            var alertView:UIAlertView = UIAlertView()
            alertView.title = "Sign in Failed!"
            alertView.message = "Please enter Username and Password"
            alertView.delegate = self
            alertView.addButtonWithTitle("OK")
            alertView.show()
        }else{
            let parameters = [
                "admin[username]": username,
                "admin[password]": password
            ]

            // start activity indicator
            self.activityIndicatorView.hidden = false     

            Alamofire.request(.POST, "http://0.0.0.0:3000/api/1/sessions",parameters: parameters)
                .responseJSON { (_, _, JSON, error) in
                    let jsonData:NSDictionary = JSON as! NSDictionary
                    if jsonData.objectForKey("error") != nil {
                        let error_description:String = jsonData.objectForKey("error_description") as! String
                        self.displayAlertMessage("Error", alertDescription:error_description )
                        return
                    }
                    self.activityIndicatorView.hidden = true
                    self.updateUserLoggedInFlag()

                    // save API AuthToken and ExpiryDate in Keychain
                    self.saveApiTokenInKeychain(jsonData.objectForKey("response") as! NSDictionary)
            }
        }

    }
</pre>

<p>这里你需要使用cocopods管理你的项目依赖，并使用了第三方的网络库 Alamofire</p>
<p>我的Podfile文件如下:</p>
<pre>source 'https://github.com/CocoaPods/Specs.git'
platform :ios, '8.0'
use_frameworks!
pod 'Alamofire', '~&gt; 1.2'
pod 'ObjectMapper', '~&gt; 0.12'
pod 'XLForm', :git =&gt; 'https://github.com/xmartlabs/XLForm.git'
pod 'Timepiece'
</pre>

<p>ObjectMapper是将json转换成swift里的model</p>
<p>XLForm是可以简便的构造表单</p>
<p>上面的代码跟刚才CRUL测试做的事情一样，都是发送了一个post请求来进行登陆。只不过这次是使用Alamofire来进行请求。</p>
<p>请求成功后，updateUserLoggedInFlag、saveApiTokenInKeychain</p>
<p>这两个方法如下:</p>
<pre>    func updateUserLoggedInFlag() {
        // Update the NSUserDefaults flag
        let defaults = NSUserDefaults.standardUserDefaults()
        defaults.setObject("loggedIn", forKey: "userLoggedIn")
        defaults.synchronize()
    }

    func saveApiTokenInKeychain(tokenDict:NSDictionary) {
        let admin_id = (tokenDict.objectForKey("admin_id") as! NSNumber).stringValue
        let token = tokenDict.objectForKey("token") as! String

        println("admin_id=\(admin_id) token=\(token)")

        KeychainAccess.setPassword(token, account: "Auth_Token", service: "KeyChainService")
        KeychainAccess.setPassword(admin_id, account: "Auth_Admin_Id", service: "KeyChainService")
        self.dismissViewControllerAnimated(true, completion: nil)
    }
    func displayAlertMessage(alertTitle:String, alertDescription:String) -&gt; Void {
        // hide activityIndicator view and display alert message
        self.activityIndicatorView.hidden = true
        let errorAlert = UIAlertView(title:alertTitle, message:alertDescription, delegate:nil, cancelButtonTitle:"OK")
        errorAlert.show()
    }
</pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/06/09/ios8、swift、rails4实现简单的登录功能/" data-id="cimadljs30006lav19mk7amxg" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ios/">ios</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rails/">rails</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/swift/">swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-rails4-extjs4生产环境js的压缩" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/04/02/rails4-extjs4生产环境js的压缩/" class="article-date">
  <time datetime="2015-04-02T08:43:20.000Z" itemprop="datePublished">2015-04-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/04/02/rails4-extjs4生产环境js的压缩/">rails4+extjs4生产环境js的压缩</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><p>开发环境:</p>
<p>rails4、extjs4.2.1</p>
</li>
<li><p>目标</p>
<p>将project_name/app/assets/javascripts/目录下的所有的extjs文件压缩为一个js,提高生产环境的加载速度。</p>
</li>
<li><p>压缩js所需环境安装</p>
<ol>
<li>java环境:java version “1.7.0_51”</li>
<li><p>安装sencha cmd</p>
<p>Sencha Cmd supports Ext JS 4.1.1a and higher and Sencha Touch 2.1 and higher.</p>
</li>
<li>extjs4.2.1 sdk</li>
</ol>
</li>
<li><p>做法</p>
<ol>
<li><p>首先将extjs sdk解压</p>
<p><a href="http://stormtoy.cn/wp-content/uploads/2015/04/Snip20150402_1.png"><img src="/assets/Snip20150402_1-300x95.png" alt="Snip20150402_1"></a></p>
</li>
<li><p>进入sdk目录，并用sencha 命令建立一个extjs app</p>
<p>[<img src="/assets/Snip20150402_2-300x19.png" alt="Snip20150402_2"></p>
<p>注意](<a href="http://stormtoy.cn/wp-content/uploads/2015/04/Snip20150402_2.png):Packt换成你extjs">http://stormtoy.cn/wp-content/uploads/2015/04/Snip20150402_2.png):Packt换成你extjs</a> app的名字 gykj换成你项目的名字</p>
</li>
<li>然后拷贝project_name/app/assets/javascripts/目录下的所有js文件(这些都是extjs的文件)到你用sencha命令建立的目录下，我这里是~/gykj，并替换。</li>
<li><p>现在使用sencha app build就可以压缩js和css了，之后会在gykj目录下生成生产环境所需的文件:</p>
<p><a href="http://stormtoy.cn/wp-content/uploads/2015/04/Snip20150402_3.png"><img src="/assets/Snip20150402_3-300x176.png" alt="Snip20150402_3"></a></p>
<p>之后可以把production目录下的文件部署到生产环境了</p>
</li>
</ol>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/04/02/rails4-extjs4生产环境js的压缩/" data-id="cimadljsf000clav18pq9gtf3" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/extjs/">extjs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/rails/">rails</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sencha/">sencha</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mac下brew的使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/31/mac下brew的使用/" class="article-date">
  <time datetime="2015-03-31T06:59:54.000Z" itemprop="datePublished">2015-03-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/31/mac下brew的使用/">mac下brew的使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://stackoverflow.com/questions/3987683/homebrew-install-specific-version-of-formula" target="_blank" rel="external">http://stackoverflow.com/questions/3987683/homebrew-install-specific-version-of-formula</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/03/31/mac下brew的使用/" data-id="cimadljs70009lav1lgcj1nm8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/brew/">brew</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mac/">mac</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mac-文件权限使用" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/31/mac-文件权限使用/" class="article-date">
  <time datetime="2015-03-31T06:45:43.000Z" itemprop="datePublished">2015-03-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/31/mac-文件权限使用/">mac 文件权限使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Mac的管理模式导致很多文件被处于保护模式下，登陆用户无法直接修改和保存。</p>
<p>命令行方式:</p>
<p>cd dir</p>
<p>sudo chmod 777 -R dir</p>
<p>这样dir以及dir的子目录都具有可读写的权限了。</p>
<p>以下是使用操作Finder的方式:</p>
<p>如果需要将一个默认受保护的文件或者文件夹作为可读可写模式。只需进行如下操作</p>
<p>1、在Finder中，使用Command+Shift+G，找到该文件夹</p>
<p>2、右键打开“简介”功能，并打开“共享和权限”选项</p>
<p><img src="/assets/0_1315112808kbFf.gif" alt=""></p>
<p>3、解除锁定，修改用户权限。如果没有指定用户，可以通过添加用户完成权限修改</p>
<p><img src="/assets/0_1315112892lc4i.gif" alt=""></p>
<p>转自:<a href="http://blog.csdn.net/password318/article/details/6746965" target="_blank" rel="external">http://blog.csdn.net/password318/article/details/6746965</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/03/31/mac-文件权限使用/" data-id="cimadljs50008lav15t72fa7n" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mac/">mac</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-git使用总结" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/03/30/git使用总结/" class="article-date">
  <time datetime="2015-03-30T14:16:34.000Z" itemprop="datePublished">2015-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/03/30/git使用总结/">git使用总结</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><p>有时候错误的往一个git目录中拷贝了许多错误的文件，而这些文件并不需要进行版本控制，需要删除，如果有很多，一个一个删除又很麻烦，这时可以使用 git clean命令</p>
<p>git-clean - Remove untracked files from the working tree</p><p></p>
</li>
</ul>
<p>git clean 参数</p>
<pre><code>-n 显示 将要 删除的 文件 和  目录

-f 删除 文件，-df 删除 文件 和 目录

git clean -n

git clean -df

&lt;p&gt;git clean -f
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://stormtoy.cn/2015/03/30/git使用总结/" data-id="cimadljs10004lav19mqsycxa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>

    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/brew/">brew</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/extjs/">extjs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios/">ios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac/">mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/osx/">osx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/postgresql/">postgresql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rails/">rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sencha/">sencha</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/感悟/">感悟</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术文章/">技术文章</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/brew/" style="font-size: 10px;">brew</a> <a href="/tags/c/" style="font-size: 10px;">c#</a> <a href="/tags/extjs/" style="font-size: 10px;">extjs</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/ios/" style="font-size: 15px;">ios</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/osx/" style="font-size: 10px;">osx</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/postgresql/" style="font-size: 10px;">postgresql</a> <a href="/tags/rails/" style="font-size: 15px;">rails</a> <a href="/tags/sencha/" style="font-size: 10px;">sencha</a> <a href="/tags/swift/" style="font-size: 10px;">swift</a> <a href="/tags/感悟/" style="font-size: 10px;">感悟</a> <a href="/tags/技术文章/" style="font-size: 20px;">技术文章</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">June 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/05/C-学习笔记/">C#学习笔记</a>
          </li>
        
          <li>
            <a href="/2016/01/01/从现在开始，做个自由的人/">从现在开始，做个自由的人</a>
          </li>
        
          <li>
            <a href="/2015/12/12/png-support-for-php-on-os-x-yosemite/">png support for php on os x yosemite</a>
          </li>
        
          <li>
            <a href="/2015/06/26/ios8、cancan、显示隐藏静态uitableviewcell/">ios8、cancan、显示隐藏静态uitableviewcell</a>
          </li>
        
          <li>
            <a href="/2015/06/24/Postgres-on-OSX-with-homebrew-not-running-after-OSX-crash/">Postgres on OSX with homebrew not running after OSX crash</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Strom<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>